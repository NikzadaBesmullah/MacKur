@using Microsoft.AspNetCore.Identity
@using haliSahaRandevu.Models
@inject SignInManager<AppUser> SignInManager
@inject UserManager<AppUser> UserManager

<ul class="navbar-nav">
@if (SignInManager.IsSignedIn(User))
{
    var user = await UserManager.GetUserAsync(User);
    var displayName = user?.FullName ?? User.Identity?.Name;

    @if (User.Identity.IsAuthenticated && !User.IsInRole("Admin") && !User.IsInRole("SahaSahibi"))
    {
        <li class="nav-item">
            <a class="nav-link text-dark fw-bold" asp-area="" asp-controller="Home" asp-action="Favorites" title="Favorilerim"><i class="bi bi-heart-fill text-danger"></i> Favorilerim</a>
        </li>
    }
    @if (User.IsInRole("SahaSahibi"))
    {
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle text-dark fw-bold" href="#" id="ownerDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="bi bi-speedometer2"></i> Yönetim Paneli
            </a>
            <ul class="dropdown-menu dropdown-menu-end shadow border-0" aria-labelledby="ownerDropdown">
                <li><a class="dropdown-item" asp-controller="Saha" asp-action="Dashboard"><i class="bi bi-graph-up me-2"></i> İstatistikler</a></li>
                <li><hr class="dropdown-divider"></li>
                <li><a class="dropdown-item" asp-controller="Saha" asp-action="Index"><i class="bi bi-building me-2"></i> Sahalarım</a></li>
                <li><a class="dropdown-item" asp-controller="Saha" asp-action="Reservations"><i class="bi bi-calendar-check me-2"></i> Randevu Talepleri</a></li>
            </ul>
        </li>
    }
    <li class="nav-item">
        <a  class="nav-link text-dark fw-bold" asp-area="" asp-controller="Account" asp-action="Settings" title="Ayarlar">Merhaba @displayName!</a>
    </li>
    <li class="nav-item">
        <form  class="form-inline" asp-area="" asp-controller="Account" asp-action="Logout" method="post">
            <button  type="submit" class="nav-link btn btn-link text-dark">Çıkış Yap</button>
        </form>
    </li>
}
else
{
    <li class="nav-item">
        <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Register">Kayıt Ol</a>
    </li>
    <li class="nav-item">
        <a class="nav-link text-dark" asp-area="" asp-controller="Account" asp-action="Login">Giriş Yap</a>
    </li>
}
</ul>
